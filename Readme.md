# آزمایش ۵ - پروفایلینگ

## بررسی JavaCup

در ابتدا برنامه‌ی YourKit را از سایت گفته شده برای سیستم‌عامل مک دانلود کردیم و پس از راه‌اندازی. پلاگین YourKit بر روی Intellij آیکون مربوط به این برنامه در Intellij ظاهر شد.

پس از اجرای برنامه JavaCup با استفاده از دکمه YourKit در Intellij برنامه به شکل زیر شد و ورودی‌‌ها را به آن دادیم.
![alt text](image.png)
با بررسی برنامه‌ی زمانی YourKit می‌بینیم که تا زمانی که نمودار CPU یکنواخت بود، درحال گرفتن ووردی‌‌ها بودیم و پس از آن تابع temp است که مصرف CPU بالایی دارد. 
![alt text](image-1.png)
بررسی مصرف حافظه RAM نیز همین نتیجه را به ما نشان میدهد.
![alt text](image-2.png)

## بهبود JavaCup
همانطور که در قسمت قبل هم دیدیم، تابع temp مصرف CPU و RAM بالایی دارد که این موضوع به استفاده از ArrayList و append کردن اعداد بستگی دارد که عملیات سنگینی است. برای بهبود این کد میتوان ArrayList را به صورت زیر با آرایه جایگزین کرد.
```
public static void temp() {
    int [][] a = new int[10000][20000];
    for (int i = 0; i < 10000; i++) {
        for (int j = 0; j < 20000; j++) {
            a[i][j] = i + j;
        }
    }
}
```
پس از اعمال این تغییر، دیگر peak خاصی در نمودارهای CPU و RAM نخواهیم داشت و. حتی این تابع به قدری سریع و کم‌مصرف شده است که در نمودار‌ها قابل مشاهده نیست.
![alt text](image-3.png)
![alt text](image-4.png)